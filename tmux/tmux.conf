# ==========================================================
#  Configuración Inicial para Tmux (Versión Corregida)
# ==========================================================

# --- Comportamiento General ---

# Cambiar la combinación de prefijo de Ctrl-b a Ctrl-a (más accesible)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Habilitar el uso del ratón (seleccionar paneles, ventanas, redimensionar)
set -g mouse on

# Habilitar colores de 24-bit (True Color) para que Neovim se vea perfecto
set -g default-terminal "tmux-256color"

# Empezar a contar ventanas y paneles desde 1 en lugar de 0
set -g base-index 1
setw -g pane-base-index 1
set-option -g renumber-windows on
set-option -g status-position top

# Aumentar el historial de scroll
set -g history-limit 10000

# Configure the catppuccin plugin
set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"

# --- Plugins ---
set -g @plugin 'tmux-plugins/tpm' # Plugin Manager

run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux
run '~/.tmux/plugins/tpm/tpm' # Cargar el Plugin Manager

# --- Atajos de Teclado (Keybinds) ---

# 1. Moverse entre paneles con las teclas de Vim (después del prefijo)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

bind-key -n C-h select-pane -L
bind-key -n C-j select-pane -D
bind-key -n C-k select-pane -U
bind-key -n C-l select-pane -R

# 2. Crear divisiones (splits) de forma más intuitiva
# División vertical con |
bind | split-window -h -c "#{pane_current_path}"
# División horizontal con -
bind - split-window -v -c "#{pane_current_path}"
# Desactivar los atajos por defecto (menos intuitivos)
unbind '"'
unbind %

# Recargar la configuración rápidamente con Prefijo + r
unbind-key r # Usar unbind-key es más explícito y seguro
bind-key r source-file ~/.tmux.conf \; display "Configuración recargada!"

# --- Configuración General de la Barra ---

# Make the status line pretty and add some modules

set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
set -g status-right "#{E:@catppuccin_status_application}"
set -ag status-right "#{E:@catppuccin_status_session}"
set -ag status-right "#{E:@catppuccin_status_uptime}"
set -agF status-right "#{E:@catppuccin_status_battery}"
run ~/.config/tmux/plugins/tmux-plugins/battery.tmux
